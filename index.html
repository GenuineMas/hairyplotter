<!DOCTYPE html>
<html>
    <head>
        <title>Electrooculogram with an Arduino and a Computer.</title>
        <meta charset='utf-8'>

        <link rel="stylesheet" href="index.css">
        <link rel="shortcut icon" type="image/png" href="images/favicon.ico">
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

        <script>
            $(document).ready(function () {
                $('.clicktoshow').click(function () {
                    var text = $(this).text();
                    if ($(this).next().is(':hidden')) {
                        $(this).next().slideDown('fast');
                        $(this).html(text + " ^ ");
                    } else {
                        $(this).next().slideUp('fast');
                        $(this).html(text.slice(0, text.length - 2));
                    }
                });
            });
        </script>
    </head>

    <body>
        <a href="https://github.com/pranavrc/hairyplotter"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
        <h1>DIY Electrooculogram</h1>
        <div id="exp">Gauging Eye positions with an Arduino and a Computer.</div><hr /><br />
        <div id="parent">
            And (possibly) moving the mouse pointer with the eyes. And (possibly) feeling like Yoda.<br /><br />
            <a href="http://en.wikipedia.org/wiki/Electrooculography">Electrooculography</a> is a beautiful concept that we stumbled upon during our Junior year of study, which was, in fact, so intuitively simple that we decided to whip up a little model by ourselves. So here's a Do-It-Yourself Electrooculogram we came up with. As a bonus, we wrote a little extensible framework over which you could write quasi-plugins (Mouse pointer movement and RC Car Navigation being ours).<br /><br />
            <hr />
            <div id="list">
                <ul>
                    <li><a href="#premise">Premise.</a></li>
                    <li><a href="#how-it-works">How it works.</a></li>
                    <li><a href="#electrodes">Electrodes on a glass frame.</a></li>
                    <li><a href="#circuit">Amplifying and filtering circuit.</a></li>
                    <li><a href="#arduino">Arduino - The Microcontroller.</a></li>
                    <li><a href="#code">Computer and some code.</a></li>
                </ul>
            </div>
            <hr />
            <div id="premise">
                <h3>Premise.</h3>
                Straight out of <a href="http://en.wikipedia.org/wiki/Electrooculography">Wikipedia</a>: <br /><i>To measure eye movement, pairs of electrodes are typically placed either above and below the eye or to the left and right of the eye. If the eye moves from center position toward one of the two electrodes, this electrode "sees" the positive side of the retina and the opposite electrode "sees" the negative side of the retina. Consequently, a potential difference occurs between the electrodes. Assuming that the resting potential is constant, the recorded potential is a measure of the eye's position.</i><br /><br />
                In ELI5 (Explain Like I'm Five) terms, we're going to stick a bunch of electrodes across our eyes, and since they generate different potentials for different positions, we should be able to get an idea of the current position of the eyes based on the potential observed across them.
            </div>
            <hr />
            <div id="how-it-works">
                <h3>How it works.</h3>
                Here's a DLI5 (Drawn Like I'm Five) of the setup: <br /><br />
                <a href="images/roughdiag.png"><img src="images/roughdiag.png" alt="Rough diagram"></a><br />
                <ol>
                    <li><strong>Electrodes on a glass frame.</strong> When the eyes move, the corresponding change in potential across them is transmitted from electrodes placed across them, to a noise-reduction circuit. <i>Biological signals are goddamn noisy.</i></li>
                    <li><strong>Amplifying and filtering circuit.</strong> The raw signals are, yeah, noisy. It's not possible to completely dust off the signal and ready it for data extraction, but <i>something</i> can be done.</li>
                    <li><strong>Arduino - The Microcontroller.</strong> Arduino here acts as an interface between the EOG circuit and the Computing device. We use it to take the cleaned up signal and send the values to a Computer over USB ports.</li>
                    <li><strong>Computer and some code.</strong> We continuously read the USB port for the arduino-transmitted potential values, classify them based on observed values for each position of the eyes.</li>
                </ol>
            </div>
            <hr />
            <div id="electrodes">
                <h3>Electrodes on a glass frame.</h3>
                <a href="images/electrodes.jpg"><img src="images/electrodes.jpg" alt="Electrodes in a glass frame"></a><br />
                This step is pretty straight-forward. We use a pair of glasses as a frame to wind the electrodes such that when worn, the electrodes make contact with our <a href="http://en.wikipedia.org/wiki/Temple_%28anatomy%29">temples</a>. There are two electrodes (Right/Left or Up/Down), along with a Ground Electrode placed on the forehead to isolate noise and for electrical reference. <a href="https://www.google.co.in/search?q=medical+electrodes">Medical electrodes</a> are a good choice.<br /><br />
                <a href="https://www.google.co.in/search?q=electrooculography&tbm=isch">Here</a> are some snazzy images of how it looks like when worn.
            </div>
            <hr />
            <div id="circuit">
                <h3>Amplifying and filtering circuit.</h3>
                The signals received from the electrodes are <a href="http://en.wikipedia.org/wiki/Noise_%28electronics%29">noisy</a>, so we need an amplification and filtering circuit to get rid of the noise. We're only interested in the frequency range of the usable signal that lies in the narrow bandwidth of around 1 Hz to 35 Hz. <i>Everything else be damned.</i><br /><br />
                As for the Amplification, that's required because we're dealing with skin surface difference potentials in the range of microvolts. Our Arduino, meanwhile, has an input reading range of 0-5 V and it needs to comprehend what's going on.<br /><br />
                We do this whole process in several stages:<br />
                <span class="clicktoshow">Primary Amplification with an Instrumentation Amplifier.</span>
                <div class="hide">
                    Using the <a href="http://www.ti.com/product/ina118">INA118</a> Instrumentation Amplifier, we'll amp up the Gain all the way to 500. For this chip, we have the Gain formula <i>Gain = 1 + (50K&#8486;/Gain Resistance Rg)'</i>.<br /><br />

                    That should give us the value of Rg as 100&#8486;.<br /><br />

                    <a href="images/instrumentation_amplifier.png"><img src="images/instrumentation_amplifier.png" alt="Instrumentation Amplifier"></a>
                </div><br />
                <span class="clicktoshow">Primary Filtering with a High-Pass Filter.</span>
                <div class="hide">2.</div><br />
                <span class="clicktoshow">Secondary Amplification with an Operational Amplifier.</span>
                <div class="hide">3.</div><br />
                <span class="clicktoshow">Secondary Filtering with a Low-Pass Filter.</span>
                <div class="hide">4.</div><br />
                <span class="clicktoshow">Final Circuit.</span>
                <div class="hide">5.</div><br />
            </div>
            <hr />
            <div id="arduino">
                <h3>Arduino - The Microcontroller.</h3>
            </div>
            <hr />
            <div id="code">
                <h3>Computer and some code.</h3>
            </div>
        </div><br />
        <hr /><br />
        <div id="footer">&copy; <a href="mailto:jona.mailbox@gmail.com">Jona Frank</a> and <a href="mailto:me@onloop.net">Pranav Ravichandran</a>.</div>
    </body>
</html>
